<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RPG 冒險：Artale 記憶鎖定完全版</title>
    <!-- 引入樣式表 -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- 錯誤訊息提示 -->
<div id="error-msg"></div>

<!-- 全局遮罩 -->
<div id="overlay" onclick="closeAllModals()"></div>

<!-- 掉落提示 (飄字效果) -->
<div id="drop-alert"></div>

<!-- [視窗] 職業選擇 -->
<div id="job-modal" class="modal">
    <div class="modal-header">
        <h3 id="modal-title">職業進化</h3>
    </div>
    <div id="job-options" class="modal-body">
        <!-- JS 動態生成按鈕 -->
    </div>
    <div class="modal-footer">
        <button onclick="closeAllModals()" class="close-text-btn">關閉</button>
    </div>
</div>

<!-- [視窗] 設定 (匯入/匯出/重置) -->
<div id="settings-modal" class="modal">
    <div class="modal-header">
        <h3>遊戲設定</h3>
    </div>
    <div class="modal-body">
        <p style="color:#aaa; font-size:12px; margin-bottom:5px;">存檔代碼 (Base64)：</p>
        <textarea id="save-data-io" rows="5" placeholder="在此貼上存檔代碼，或點擊匯出產生代碼..."></textarea>
        
        <div class="setting-actions">
            <button class="action-btn export" onclick="exportSave()">匯出 (複製)</button>
            <button class="action-btn import" onclick="importSave()">匯入 (讀取)</button>
        </div>
        
        <div style="margin-top: 20px; border-top: 1px solid #444; padding-top: 10px;">
            <p style="color:#f55; font-size:12px; margin-bottom:5px;">危險區域：</p>
            <button class="action-btn danger" onclick="resetGame()">刪除存檔重置</button>
        </div>
    </div>
    <div class="modal-footer">
        <button onclick="closeAllModals()" class="close-text-btn">關閉</button>
    </div>
</div>

<!-- 頂部資訊欄 -->
<div class="header">
    <div class="settings-icon" onclick="openSettings()">⚙️</div>
    <div class="stage-info">第 <span id="stage-txt">1</span> 關</div>
    <div class="currency">
        <span>💰 <span id="coin-txt">0</span></span>
        <span>💎 <span id="dia-txt">0</span></span>
        <span class="sp-text">✨ SP: <span id="sp-txt">10</span>/<span id="sp-max-txt">10</span></span>
    </div>
    <div class="dps-meter">總 DPS: <span id="dps-txt">0</span></div>
</div>

<!-- 遊戲主畫面 (Canvas) -->
<div id="game-area">
    <canvas id="gameCanvas"></canvas>
</div>

<!-- 底部選單 -->
<div id="menu-container">
    <div class="menu-header">
        <div class="tab active" onclick="switchTab(0)">主角與技能</div>
        <div class="tab" onclick="switchTab(1)">英雄助手</div>
        <div class="tab" onclick="switchTab(2)">聖物裝備</div>
    </div>
    
    <!-- 分頁 1: 主角 -->
    <div id="panel0" class="panel-content active">
        <div class="item" style="border: 1px solid #ffcc00; background: rgba(255, 204, 0, 0.05);">
            <div class="info">
                <strong id="pAtk-title">⚔️ 主角攻擊力 (Lv.1)</strong>
                <small id="pAtk-val">基礎威力: 1</small>
            </div>
            <button class="up-btn" id="pUpBtn" onclick="upgradePlayer()">升級</button>
        </div>
        <h4 class="section-title">主動技能</h4>
        <div id="skill-area"></div>
    </div>
    
    <!-- 分頁 2: 助手 -->
    <div id="panel1" class="panel-content">
        <div class="panel-desc">
            助手會自動攻擊。<br>
            楓葉系需 Lv.1 選陣營；仙境系 Lv.10 轉職。<br>
            全系列分支收集完畢後不再新增。
        </div>
        <div id="helper-list"></div>
    </div>
    
    <!-- 分頁 3: 聖物 -->
    <div id="panel2" class="panel-content">
        <div class="panel-desc">擊殺 BOSS 機率掉落聖物。</div>
        <div id="relic-area"></div>
    </div>
</div>

<!-- 依序引入 JS 檔案 (順序很重要) -->
<script src="data.js"></script> <!-- 1. 資料庫 -->
<script src="core.js"></script> <!-- 2. 核心邏輯 -->
<script src="ui.js"></script>   <!-- 3. 介面控制 -->

</body>
</html>


